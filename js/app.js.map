{"version":3,"sources":["app/js/app.js","app/js/directives/ng-bind-keys.js","app/js/directives/ng-enter.js","app/js/directives/ng-input-change.js","app/js/directives/ng-scroll-to.js","app/js/directives/youtube-player.js","app/js/factories/youtube-url-parser.js","app/js/filters/thumbnail-url-filter.js","app/js/player-overlay/player-overlay.directive.js","app/js/player/player.directive.js","app/js/root/root.directive.js","app/js/services/lastsubreddits-service.js","app/js/services/player-service.js","app/js/services/playlist-service.js","app/js/services/reddit-service.js","app/js/services/settings-service.js","app/js/services/sidebar-service.js","app/js/sidebar/settings-panel.directive.js","app/js/sidebar/sidebar-empty.directive.js","app/js/sidebar/sidebar-foot.directive.js","app/js/sidebar/sidebar-head.directive.js","app/js/sidebar/sidebar-list.directive.js","app/js/sidebar/sidebar.directive.js","app/js/video-item/video-item.directive.js"],"names":[],"mappings":";;AAAA,CAAC,CAAC,YAAM;AACN,UACG,MADH,CACU,WADV,EACuB,CACnB,oBADmB,EAEnB,WAFmB,CADvB;;AAMA,UACG,MADH,CACU,WADV,EAEG,MAFH,CAEU,UAAS,2BAAT,EAAsC;AAC5C,gCAA4B,SAA5B,CAAsC,WAAtC;AACD,GAJH;;AAMA,UACG,MADH,CACU,WADV,EAEG,GAFH,CAEO,UAAS,OAAT,EAAkB;AACrB,MAAE,OAAF,EAAW,EAAX,CAAc,QAAd,EAAwB,EAAE,QAAF,CAAW,YAAW;AAC5C,QAAE,oBAAF,EACG,IADH,CACQ,OADR,EACiB,QAAQ,UADzB,EAEG,IAFH,CAEQ,QAFR,EAEkB,QAAQ,WAF1B;AAGD,KAJuB,EAIrB,GAJqB,CAAxB;AAKD,GARH;AASD,CAtBA;;;ACAD,CAAC,CAAC,YAAW;AACX;;AAEA,UAAQ,MAAR,CAAe,WAAf,EACG,SADH,CACa,YADb,EAC2B,CAAC,WAAD,EAAc,UAAS,SAAT,EAAoB;AACzD,WAAO;AACL,gBAAU,GADL;AAEL,aAAO;AACL,2BAAmB;AADd,OAFF;AAKL,YAAM,cAAS,KAAT,EAAgB,OAAhB,EAAyB,IAAzB,EAA+B;AACnC,YAAI,WAAW,EAAE,MAAM,iBAAR,EAA2B,GAA3B,CAA+B,UAAC,EAAD,EAAK,OAAL;AAAA,iBAAiB,OAAjB;AAAA,SAA/B,EAAyD,KAAzD,EAAf;;AAEA,kBAAU,EAAV,CAAa,SAAb,EAAwB,UAAS,KAAT,EAAgB;AACtC,cAAG,MAAM,MAAN,CAAa,QAAb,KAA0B,OAA7B,EAAsC;AACpC,gBAAI,iBAAiB,MAAM,KAAN,IAAe,MAAM,OAA1C;;AAEA,gBAAG,MAAM,iBAAN,CAAwB,cAAxB,CAAH,EAA4C;AAC1C,oBAAM,cAAN;AACA,oBAAM,iBAAN,CAAwB,cAAxB,EAAwC,IAAxC,CAA6C,EAA7C,EAAiD,KAAjD;AACD;AACF;AACF,SATD;AAUD;AAlBI,KAAP;AAoBD,GArBwB,CAD3B;AAwBD,CA3BA;;;ACAD,CAAC,CAAC,YAAM;AACN,UAAQ,MAAR,CAAe,WAAf,EACG,SADH,CACa,SADb,EACwB,YAAM;AAC1B,WAAO;AACL,gBAAU,GADL;AAEL,eAAS,KAFJ;AAGL,aAAO;AACL,iBAAS,GADJ;AAEL,wBAAgB;AAFX,OAHF;AAOL,YAAM,cAAC,KAAD,EAAQ,OAAR,EAAiB,IAAjB,EAA0B;AAC9B,gBAAQ,EAAR,CAAW,UAAX,EAAuB,iBAAS;AAC9B,cAAG,MAAM,KAAN,KAAgB,EAAhB,IAAsB,MAAM,OAAN,KAAkB,EAA3C,EAA+C;AAC7C,kBAAM,OAAN,CAAc,IAAd;;AAEA,gBAAG,MAAM,cAAN,CAAqB,WAAxB,EAAqC;AACnC,gBAAE,OAAF,EAAW,IAAX;AACD;;AAED,kBAAM,MAAN;AACD;AACF,SAVD;AAWD;AAnBI,KAAP;AAqBD,GAvBH;AAwBD,CAzBA;;;ACAD,CAAC,CAAC,YAAW;AACX;;AAEA,UAAQ,MAAR,CAAe,WAAf,EACG,SADH,CACa,eADb,EAC8B,YAAW;AACrC,WAAO;AACL,gBAAU,GADL;AAEL,aAAO;AACL,uBAAe;AADV,OAFF;AAKL,eAAS,KALJ;AAML,YAAM,cAAS,KAAT,EAAgB,OAAhB,EAAyB,KAAzB,EAAgC;AACpC,UAAE,OAAF,EAAW,EAAX,CAAc,cAAd,EAA8B,YAAW;AACvC,gBAAM,aAAN,CAAoB,IAApB,CAAyB,IAAzB;AACD,SAFD;;AAIA,cAAM,GAAN,CAAU,UAAV,EAAsB,YAAW;AAC/B,YAAE,OAAF,EAAW,GAAX,CAAe,cAAf;AACD,SAFD;AAGD;AAdI,KAAP;AAgBD,GAlBH;AAoBD,CAvBA;;;ACAD,CAAC,CAAC,YAAW;AACX;;AAEA,UACG,MADH,CACU,WADV,EAEG,SAFH,CAEa,YAFb,EAE2B,CAAC,YAAD,EAAe,UAAf,EAA2B,UAAS,UAAT,EAAqB,QAArB,EAA+B;AACjF,WAAO;AACL,gBAAU,GADL;AAEL,aAAO;AACL,oBAAY,GADP;AAEL,mBAAW;AAFN,OAFF;AAML,YAAM,cAAS,KAAT,EAAgB,OAAhB,EAAyB;AAC7B,YAAI,WAAW,EAAE,OAAF,CAAf;;AAEA,mBAAW,GAAX,CAAe,yBAAf,EAA0C,YAAM;AAC9C,mBAAS,YAAM;AACb,gBAAI,oBAAoB,EAAE,OAAF,EAAW,IAAX,CAAgB,MAAM,UAAtB,CAAxB;;AAEA,gBAAG,kBAAkB,MAArB,EAA6B;AAC3B,uBAAS,GAAT,CAAa,CAAb,EAAgB,SAAhB,GAA4B,CAA5B;AACA,uBAAS,GAAT,CAAa,CAAb,EAAgB,SAAhB,GAA4B,kBAAkB,QAAlB,GAA6B,GAA7B,IAAoC,SAAS,SAAS,GAAT,CAAa,aAAb,CAAT,EAAsC,EAAtC,KAA6C,CAAjF,IAAsF,SAAS,MAAM,SAAf,EAA0B,EAA1B,CAAlH;AACD;AACF,WAPD,EAOG,GAPH;AAQD,SATD;AAUD;AAnBI,KAAP;AAqBD,GAtBwB,CAF3B;AAyBD,CA5BA;;;ACAD,CAAC,CAAC,YAAW;AACX;;AAEA,UAAQ,MAAR,CAAe,WAAf,EACG,SADH,CACa,eADb,EAC8B,CAAC,SAAD,EAAY,eAAZ,EAA6B,UAAS,OAAT,EAAkB,aAAlB,EAAiC;AACxF,WAAO;AACL,gBAAU,GADL;AAEL,eAAS,KAFJ;AAGL,YAAM,cAAS,KAAT,EAAgB,OAAhB,EAAyB,KAAzB,EAAgC;;;;AAIpC,YAAG,CAAC,MAAM,UAAV,EAAsB;AACpB,cAAI,MAAM,EAAE,UAAF,EAAc,IAAd,CAAmB;AAC3B,iBAAK,oCADsB;AAE3B,mBAAO;AAFoB,WAAnB,CAAV;;;;;AAQA,YAAE,QAAF,EAAY,EAAZ,CAAe,CAAf,EAAkB,MAAlB,CAAyB,GAAzB;AACD;;AAED,gBAAQ,uBAAR,GAAkC,YAAW;AAC3C,wBAAc,eAAd,CAA8B,MAAM,aAAN,IAAuB,mBAArD;AACD,SAFD;AAGD;AAtBI,KAAP;AAwBD,GAzB2B,CAD9B;AA2BD,CA9BA;;;ACAD,CAAC,CAAC,YAAM;AACN;;AAEA,UAAQ,MAAR,CAAe,WAAf,EAA4B,OAA5B,CAAoC,kBAApC,EAAwD,YAAW;;;;AAIjE,QAAI,SAAS,yEAAb;QACI,YAAY,6CADhB;;AAGA,aAAS,mBAAT,CAA6B,GAA7B,EAAkC;AAChC,UAAI,SAAS,OAAO,IAAP,CAAY,GAAZ,CAAb;;AAEA,UAAG,CAAC,MAAJ,EAAY;AACV,iBAAS,UAAU,IAAV,CAAe,GAAf,CAAT;AACD;;AAED,UAAG,MAAH,EAAW;;AAET,YAAI,aAAa,oBAAjB;YACI,YAAY,CADhB;YAEI,iBAAiB,WAAW,IAAX,CAAgB,GAAhB,CAFrB;;AAIA,YAAG,mBAAmB,IAAtB,EAA4B;AAC1B,cAAI,cAAc,EAAC,KAAI,IAAL,EAAW,KAAI,EAAf,EAAmB,KAAI,CAAvB,EAAlB;cACI,SAAS,iBADb;;;AAIA,cAAI,YAAY,eAAe,CAAf,EAAkB,KAAlB,CAAwB,MAAxB,CAAhB;;AAEA,cAAG,SAAH,EAAc;AACZ,sBAAU,OAAV,CAAkB,UAAS,EAAT,EAAY;AAC5B,kBAAI,OAAO,YAAY,GAAG,MAAH,CAAU,GAAG,MAAH,GAAU,CAApB,CAAZ,CAAX;kBACI,SAAS,SAAS,GAAG,KAAH,CAAS,CAAT,EAAY,CAAE,CAAd,CAAT,EAA2B,EAA3B,CADb;;;AAIA,2BAAa,OAAO,MAApB;AACD,aAND;AAOD,WARD,MAQO;;AAEL,wBAAY,SAAS,eAAe,CAAf,EAAkB,OAAlB,CAA0B,IAA1B,EAA+B,EAA/B,CAAT,EAA6C,EAA7C,CAAZ;AACA,gBAAI,MAAM,SAAN,CAAJ,EAAsB;AACpB,0BAAY,CAAZ;AACD;AACF;AACF;;AAED,eAAO;AACL,cAAI,OAAO,CAAP,CADC;AAEL,qBAAW;AAFN,SAAP;AAID,OAlCD,MAkCO;AACL,eAAO,EAAP;AACD;AACF;;AAED,WAAO,mBAAP;AACD,GAtDD;AAuDD,CA1DA;;;ACAD,CAAC,CAAC,YAAM;AACN;;AAEA,UAAQ,MAAR,CAAe,WAAf,EAA4B,MAA5B,CAAmC,oBAAnC,EAAyD,YAAW;AAClE,WAAO,UAAS,YAAT,EAAuB;AAC5B,cAAO,YAAP;AACE,aAAK,MAAL;AACE,iBAAO,2BAAP;AACF,aAAK,SAAL;AACE,iBAAO,8BAAP;AAJJ;;AAOA,aAAO,YAAP;AACD,KATD;AAUD,GAXD;AAYD,CAfA;;;ACAD,CAAC,CAAC,YAAM;AACN;;AAEA,UACG,MADH,CACU,WADV,EAEG,SAFH,CAEa,eAFb,EAE8B,wBAF9B;;AAIA,WAAS,sBAAT,GAAkC;AAChC,WAAO;AACL,gBAAU,EADL;AAEL,mBAAa,2BAFR;AAGL,kBAAY,CAAC,eAAD,EAAkB,UAAS,aAAT,EAAwB;AACpD,aAAK,mBAAL,GAA2B;AAAA,iBAAM,cAAc,gBAApB;AAAA,SAA3B;AACD,OAFW;AAHP,KAAP;AAOD;AACF,CAhBA;;;ACAD,CAAC,CAAC,YAAM;AACN;;AAEA,UACG,MADH,CACU,WADV,EAEG,SAFH,CAEa,QAFb,EAEuB;AACnB,cAAU,EADS;AAEnB,iBAAa,mBAFM;AAGnB,gBAAY,sBAAW,CACtB;AAJkB,GAFvB;AAQD,CAXA;;;ACAD,CAAC,CAAC,YAAM;AACN;;AAEA,UACG,MADH,CACU,WADV,EAEG,SAFH,CAEa,MAFb,EAEqB;AACjB,cAAU,EADO;AAEjB,iBAAa,iBAFI;AAGjB,gBAAY,CAAC,QAAD,EAAW,eAAX,EAA4B,iBAA5B,EAA+C,gBAA/C,EAAiE,UAAS,MAAT,EAAiB,aAAjB,EAAgC,eAAhC,EAAiD,cAAjD,EAAiE;AAC5I,WAAK,qBAAL,GAA6B;AAC3B,UAD2B,eACtB;AAAE;AAAiB,SADG;;AAE3B,UAF2B,eAEtB;AAAE;AAAiB,SAFG;;AAG3B,UAH2B,eAGtB;AAAE;AAAa,SAHO;;AAI3B,UAJ2B,eAItB;AAAE;AAAa,SAJO;;AAK3B,UAL2B,eAKtB;AAAE,wBAAc,WAAd;AAA8B,SALV;;AAM3B,YAAI,kBAAS;;AACX,yBAAe,MAAf;AACA,iBAAO,MAAP;AACD,SAT0B;AAU3B,YAAI,kBAAS;;AACX,cAAG,eAAe,KAAf,CAAqB,GAArB,OAA+B,UAAlC,EAA8C;AAC5C,2BAAe,KAAf,CAAqB,GAArB,CAAyB,MAAzB;AACD,WAFD,MAEO;AACL,2BAAe,KAAf;AACD;;AAED,iBAAO,MAAP;AACD,SAlB0B;AAmB3B,YAAI,kBAAS;;AACX,cAAG,eAAe,KAAf,CAAqB,GAArB,OAA+B,UAAlC,EAA8C;AAC5C,2BAAe,KAAf,CAAqB,GAArB,CAAyB,UAAzB;AACA,mBAAO,MAAP;AACD;AACF;AAxB0B,OAA7B;;AA2BA,eAAS,YAAT,GAAwB;AACtB,YAAG,gBAAgB,QAAhB,CAAyB,MAA5B,EAAoC;AAClC,wBAAc,YAAd;AACA,iBAAO,MAAP;AACD;AACF;;AAED,eAAS,QAAT,GAAoB;AAClB,YAAG,gBAAgB,QAAhB,CAAyB,MAA5B,EAAoC;AAClC,wBAAc,QAAd;AACA,iBAAO,MAAP;AACD;AACF;AACF,KAzCW;AAHK,GAFrB;AAgDD,CAnDA;;;ACAD,CAAC,CAAC,YAAM;;AAEN,UAAQ,MAAR,CAAe,WAAf,EACG,OADH,CACW,uBADX,EACoC,CAAC,qBAAD,EAAwB,UAAS,mBAAT,EAA8B;AACtF,QAAI,4BAA4B,gBAAhC;QACI,sBAAsB,EAD1B;;AAGA,QAAI,iBAAiB,oBAAoB,GAApB,CAAwB,yBAAxB,CAArB;;AAEA,QAAG,CAAC,QAAQ,OAAR,CAAgB,cAAhB,CAAJ,EAAqC;AACnC,uBAAiB,EAAjB;AACD;;AAED,aAAS,OAAT,CAAiB,IAAjB,EAAuB;AACrB,UAAG,gBAAgB,IAAhB,CAAH,EAA0B;AAAE;AAAS;;AAErC,qBAAe,OAAf,CAAuB,IAAvB;AACA,uBAAiB,eAAe,KAAf,CAAqB,CAArB,EAAwB,mBAAxB,CAAjB;;AAEA;AACD;;AAED,aAAS,eAAT,CAAyB,IAAzB,EAA+B;AAC7B,aAAO,EAAE,SAAF,CAAY,cAAZ,EAA4B;AAAA,eAAO,KAAK,IAAL,KAAc,IAAI,IAAzB;AAAA,OAA5B,MAA+D,CAAC,CAAvE;AACD;;AAED,aAAS,kBAAT,GAA8B;AAC5B,0BAAoB,GAApB,CAAwB,gBAAxB,EAA0C,cAA1C;AACD;;AAED,aAAS,OAAT,GAAmB;AACjB,aAAO,cAAP;AACD;;AAED,WAAO;AACL,sBADK;AAEL,WAAK;AAFA,KAAP;AAID,GAnCiC,CADpC;AAqCD,CAvCA;;;ACAD,CAAC,CAAC,YAAW;AACX;;AAEA,UAAQ,MAAR,CAAe,WAAf,EACG,OADH,CACW,eADX,EAC4B,CAAC,SAAD,EAAY,UAAZ,EAAwB,iBAAxB,EAA2C,iBAA3C,EAA8D,YAA9D,EAA4E,UAAS,OAAT,EAAkB,QAAlB,EAA4B,eAA5B,EAA6C,eAA7C,EAA8D,UAA9D,EAA0E;AAC9K,SAAK,aAAL,GAAqB,IAArB,C;AACA,SAAK,SAAL,GAAiB,KAAjB;AACA,SAAK,gBAAL,GAAwB,EAAxB;;AAEA,SAAK,6BAAL,GAAqC,UAAS,SAAT,EAAoB;AAAA;;AACvD,UAAI,mBAAmB,EAAE,SAAF,CAAY,gBAAgB,QAA5B,EAAsC;AAAA,eAAQ,KAAK,KAAL,KAAe,MAAK,gBAAL,CAAsB,KAA7C;AAAA,OAAtC,CAAvB;;AAEA,sBAAgB,QAAhB,CAAyB,gBAAzB,EAA2C,KAA3C,GAAmD;AACjD,cAAM,SAD2C;AAEjD,iBAAS,aAAa,SAAb;AAFwC,OAAnD;AAID,KAPD;;AASA,SAAK,eAAL,GAAuB,UAAS,SAAT,EAAoB,OAApB,EAA6B;AAClD,UAAI,uBAAuB;AACzB,eAAO,QAAQ,UADU,E;AAEzB,gBAAQ,QAAQ,WAFS;AAGzB,iBAAS,aAHgB;AAIzB,oBAAY;AACV,oBAAU,CADA;AAEV,oBAAU,CAFA;AAGV,oBAAU,CAHA;AAIV,qBAAW,CAJD;AAKV,uBAAa;AALH;AAJa,OAA3B;;AAaA,cAAQ,MAAR,CAAe,oBAAf,EAAqC,OAArC;;;AAGA,WAAK,aAAL,GAAqB,IAAI,GAAG,MAAP,CAAc,aAAa,mBAA3B,EAAgD,oBAAhD,CAArB;;AAEA,WAAK,aAAL,CAAmB,gBAAnB,CAAoC,SAApC,EAA+C,cAAc,IAAd,CAAmB,IAAnB,CAA/C;AACA,WAAK,aAAL,CAAmB,gBAAnB,CAAoC,SAApC,EAA+C,cAAc,IAAd,CAAmB,IAAnB,CAA/C;AACA,WAAK,aAAL,CAAmB,gBAAnB,CAAoC,eAApC,EAAqD,KAAK,mBAAL,CAAyB,IAAzB,CAA8B,IAA9B,CAArD;;AAEA,aAAO,KAAK,aAAZ;AACD,KAxBD;;AA0BA,SAAK,SAAL,GAAiB,UAAS,IAAT,EAAe;AAC9B,UAAG,KAAK,aAAL,IAAsB,KAAK,aAAL,CAAmB,aAAzC,IAA0D,IAA7D,EAAmE;;AAEjE,YAAG,KAAK,GAAL,KAAa,KAAhB,EAAuB;AACrB,eAAK,QAAL;AACA;AACD;;AAED,aAAK,aAAL,CAAmB,aAAnB,CAAiC;AAC/B,mBAAS,KAAK,OADiB;AAE/B,wBAAc,KAAK,SAAL,IAAkB,CAFD;AAG/B,4BAAkB;AAHa,SAAjC;;AAMA,aAAK,gBAAL,GAAwB,IAAxB;AACA,aAAK,SAAL,GAAiB,IAAjB;AACA,wBAAgB,GAAhB,CAAoB,YAApB,EAAkC,gBAAgB,IAAhB,CAAqB,UAArB,GAAkC,CAApE;AACD;;AAED,iB;AACD,KApBD;;AAsBA,SAAK,QAAL,GAAgB,YAAW;AAAA;;AACzB,UAAI,qBAAqB,EAAE,SAAF,CAAY,gBAAgB,QAA5B,EAAsC,mBAAmB,IAAnB,CAAwB,IAAxB,CAAtC,IAAuE,CAAhG;;;AAGA,UAAG,sBAAsB,KAAK,GAAL,CAAS,gBAAgB,QAAhB,CAAyB,MAAzB,GAAkC,CAA3C,EAA8C,CAA9C,CAAzB,EAA2E;AACzE,wBAAgB,cAAhB,GAAiC,IAAjC,CAAsC,gBAAQ;AAC5C,iBAAK,SAAL,CAAe,gBAAgB,QAAhB,CAAyB,kBAAzB,CAAf;AACA,qBAAW,KAAX,CAAiB,yBAAjB;AACD,SAHD;AAID,OALD,MAKO;AACL,aAAK,SAAL,CAAe,gBAAgB,QAAhB,CAAyB,kBAAzB,CAAf;AACA,mBAAW,KAAX,CAAiB,yBAAjB;AACD;AACF,KAbD;;AAeA,SAAK,YAAL,GAAoB,YAAW;AAC7B,UAAI,yBAAyB,EAAE,SAAF,CAAY,gBAAgB,QAA5B,EAAsC,mBAAmB,IAAnB,CAAwB,IAAxB,CAAtC,IAAuE,CAApG;AACA,WAAK,SAAL,CAAe,gBAAgB,QAAhB,CAAyB,yBAAyB,CAAzB,GAA6B,CAA7B,GAAiC,sBAA1D,CAAf,EAAkG,UAAlG;AACA,iBAAW,KAAX,CAAiB,yBAAjB;AACD,KAJD;;AAMA,SAAK,WAAL,GAAmB,YAAW;AAC5B,UAAG,KAAK,SAAR,EAAmB;AACjB,aAAK,aAAL,CAAmB,UAAnB;AACA,aAAK,SAAL,GAAiB,KAAjB;AACD,OAHD,MAGO;AACL,aAAK,aAAL,CAAmB,SAAnB;AACA,aAAK,SAAL,GAAiB,IAAjB;AACD;AACF,KARD;;AAUA,SAAK,qBAAL,GAA6B,YAAW;AACtC,WAAK,gBAAL,GAAwB,SAAxB;AACD,KAFD;;AAIA,SAAK,mBAAL,GAA2B,UAAS,KAAT,EAAgB;AAAA;;;;;;;;;;AAUzC,UAAG,gBAAgB,IAAhB,CAAqB,aAAxB,EAAuC;AACrC,iBAAS,aAAT,CAAuB,IAAvB;AACD;;AAED,UAAG,gBAAgB,IAAhB,CAAqB,kBAArB,IAA2C,MAAM,IAAN,KAAe,CAA7D,EAAgE;AAC9D,iBAAS,YAAM;AACb,iBAAK,QAAL;AACD,SAFD,EAEG,IAFH;AAGD;;AAED,UAAI,MAAM,IAAN,KAAe,CAAnB,EAAsB;AACpB,aAAK,QAAL;AACD;AACF,KAvBD;;AAyBA,aAAS,aAAT,GAAyB;;AAExB;;AAED,aAAS,aAAT,CAAuB,KAAvB,EAA8B;;AAE5B,UAAG,CAAC,CAAD,EAAI,CAAJ,EAAO,GAAP,EAAY,GAAZ,EAAiB,GAAjB,EAAsB,OAAtB,CAA8B,MAAM,IAApC,KAA6C,CAAC,CAAjD,EAAoD;AAClD,aAAK,6BAAL,CAAmC,MAAM,IAAzC;;AAEA,aAAK,QAAL;AACD;AACF;;AAED,aAAS,kBAAT,CAA4B,IAA5B,EAAkC;AAChC,aAAO,KAAK,KAAL,KAAe,KAAK,gBAAL,CAAsB,KAA5C;AACD;;AAED,aAAS,YAAT,CAAsB,IAAtB,EAA4B;AAC1B,cAAQ,IAAR;AACE,aAAK,CAAL;AACE,iBAAO,sBAAP;AACF,aAAK,CAAL;AACE,iBAAO,mCAAP;AACF,aAAK,GAAL;AACE,iBAAO,6BAAP;AACF,aAAK,GAAL;AACA,aAAK,GAAL;AACE,iBAAO,2CAAP;AATJ;AAWD;AAEF,GAzJyB,CAD5B;AA2JD,CA9JA;;;ACAD,CAAC,CAAC,YAAW;AACX;;AAEA,UAAQ,MAAR,CAAe,WAAf,EACG,OADH,CACW,iBADX,EAC8B,CAAC,eAAD,EAAkB,UAAS,aAAT,EAAwB;AACpE,QAAI,wBAAwB,EAA5B;;;AAGA,SAAK,QAAL,GAAgB,EAAhB;AACA,SAAK,SAAL,GAAiB,KAAjB;;;AAGA,SAAK,GAAL,GAAW,GAAX;AACA,SAAK,KAAL,GAAa,KAAb;AACA,SAAK,cAAL,GAAsB,cAAtB;AACA,SAAK,cAAL,GAAsB,cAAtB;AACA,SAAK,iBAAL,GAAyB,iBAAzB;;AAEA,aAAS,GAAT,CAAa,IAAb,EAAmB;AACjB,WAAK,QAAL,CAAc,IAAd,CAAmB,IAAnB;AACA;AACA,aAAO,KAAK,QAAZ;AACD;;AAED,aAAS,cAAT,GAA4C;AAAA;;AAAA,UAApB,aAAoB,yDAAJ,EAAI;;AAC1C,WAAK,SAAL,GAAiB,IAAjB;;AAEA,aAAO,cACJ,KADI,CACE,aADF,EAEJ,IAFI,CAEC,oBAAY;AAChB,YAAG,QAAH,EAAa;AACX,gBAAK,QAAL,GAAgB,MAAK,QAAL,CAAc,MAAd,CAAqB,QAArB,CAAhB;AACA;AACA,iBAAO,QAAP;AACD;AACF,OARI,EAQF,QAAQ,IARN,EASJ,OATI,CASI;AAAA,eAAM,MAAK,SAAL,GAAiB,KAAvB;AAAA,OATJ,CAAP;AAUD;;AAED,aAAS,cAAT,GAA0B;AAAA;;AACxB,WAAK,SAAL,GAAiB,IAAjB;;AAEA,aAAO,cACJ,OADI,GAEJ,IAFI,CAEC,oBAAY;AAChB,YAAG,QAAH,EAAa;AACX,iBAAK,QAAL,GAAgB,OAAK,QAAL,CAAc,MAAd,CAAqB,QAArB,CAAhB;AACA;AACD;AACF,OAPI,EAOF,QAAQ,IAPN,EAQJ,OARI,CAQI;AAAA,eAAM,OAAK,SAAL,GAAiB,KAAvB;AAAA,OARJ,CAAP;AASD;;AAED,aAAS,KAAT,GAAiB;AACf,WAAK,QAAL,GAAgB,EAAhB;AACA;AACD;;AAED,aAAS,iBAAT,CAA2B,YAA3B,EAAyC;AACvC,4BAAsB,IAAtB,CAA2B,YAA3B;AACD;;AAED,aAAS,kBAAT,GAA8B;AAC5B,4BAAsB,GAAtB,CAA0B;AAAA,eAAM,IAAN;AAAA,OAA1B;AACD;AACF,GA7D2B,CAD9B;AA+DD,CAlEA;;;ACAD,CAAC,CAAC,YAAM;AACN;;AAEA,UACG,MADH,CACU,WADV,EAEG,OAFH,CAEW,eAFX,EAE4B,CACxB,OADwB,EAExB,IAFwB,EAGxB,kBAHwB,EAIxB,SAJwB,EAKxB,uBALwB,EAMxB,MANwB,EAOxB,aAPwB,CAF5B;;AAYA,WAAS,aAAT,CAAuB,KAAvB,EAA8B,EAA9B,EAAkC,gBAAlC,EAAoD,OAApD,EAA6D,qBAA7D,EAAoF,IAApF,EAA0F;AACxF,QAAI,oBAAoB,CAAxB;QACI,wBAAwB,CAD5B;;AAEI,gBAAY,EAFhB;QAGI,aAAa,KAHjB;QAII,oBAAoB,EAJxB;;AAMA,SAAK,KAAL,GAAa,KAAb;AACA,SAAK,KAAL,GAAa,EAAb;AACA,SAAK,OAAL,GAAe,OAAf;AACA,SAAK,UAAL,GAAkB,UAAlB;;AAEA,QAAM,eAAe,0BAArB;;AAEA,aAAS,KAAT,GAAkD;AAAA,UAAnC,aAAmC,yDAAnB,EAAmB;AAAA,UAAf,QAAe,yDAAJ,EAAI;;AAChD,UAAM,WAAW,GAAG,KAAH,EAAjB;UACM,SAAS,KAAG,YAAH,GAAkB,aAAlB,2BAAuD,uBAAqB,QAArB,GAAkC,EAAzF,CADf;;AAGA,kBAAY,QAAZ;AACA,0BAAoB,aAApB;AACA,mBAAa,IAAb;;AAEA,UAAG,EAAE,OAAF,CAAU,aAAV,CAAH,EAA6B;AAC3B,iBAAS,MAAT;AACD,OAFD,MAEO;AACL,cACG,GADH,CACO,MADP,EAEG,OAFH,CAEW,eAAe,IAAf,CAAoB,IAApB,CAFX,EAGG,KAHH,CAGS,eAAe,IAAf,CAAoB,IAApB,CAHT;AAID;;AAED,eAAS,cAAT,CAAwB,IAAxB,EAA8B,MAA9B,EAAsC,OAAtC,EAA+C,MAA/C,EAAuD;AAAA;;AACrD,YAAM,cAAc,KAAK,IAAzB;;AAEA;AACA,oBAAY,YAAY,KAAxB;AACA,qBAAa,KAAb;;AAEA,YAAI,WAAW,mBAAmB,uBAAuB,YAAY,QAAnC,CAAnB,CAAf;;AAEA,YAAG,SAAS,MAAZ,EAAoB;;;AAGlB,gCAAsB,GAAtB,CAA0B,EAAE,MAAM,aAAR,EAA1B;AACD;;AAED,YAAG,SAAS,MAAT,KAAoB,CAApB,IAAyB,qBAAqB,qBAAjD,EAAwE;AACtE,gBAAM,IAAN,CAAW,IAAX,EAAiB,aAAjB,EAAgC,SAAhC,EAA2C,QAA3C;AACD,SAFD,MAEO;AACL,cAAI,kBAAkB,YAAY,QAAZ,CAAtB;cACI,iBAAiB,EAAE,MAAF,CAAS,QAAT,EAAmB;AAAA,mBAAQ,aAAa,IAAb,QAAwB,IAAxB,CAAR;AAAA,WAAnB,CADrB;;AAGA,eAAK,KAAL,GAAa,KAAK,KAAL,CAAW,MAAX,CAAkB,cAAlB,CAAb;;AAEA,8BAAoB,CAApB;;AAEA,mBAAS,OAAT,CAAiB,cAAjB;AACD;AACF;;AAED,eAAS,cAAT,CAAwB,IAAxB,EAA8B,MAA9B,EAAsC,OAAtC,EAA+C,MAA/C,EAAuD;AACrD,qBAAa,KAAb;AACA,iBAAS,MAAT,CAAgB,IAAhB;AACD;;AAED,aAAO,SAAS,OAAhB;AACD;;;AAGD,aAAS,kBAAT,CAA4B,UAA5B,EAAwC;AACtC,UAAI,mBAAmB,EAAE,UAAF,EAAc,GAAd,CAAkB;AAAA,eAAQ,KAAK,SAAL,CAAe,IAAf,CAAR;AAAA,OAAlB,EAAgD,KAAhD,EAAvB;;AAEA,aAAO,EAAE,EAAE,IAAF,CAAO,gBAAP,CAAF,EAA4B,GAA5B,CAAgC;AAAA,eAAQ,KAAK,KAAL,CAAW,IAAX,CAAR;AAAA,OAAhC,EAA0D,KAA1D,EAAP;AACD;;AAED,aAAS,sBAAT,CAAgC,IAAhC,EAAsC;;;;AAIpC,aAAO,EAAE,IAAF,EACI,MADJ,CACW,UAAC,IAAD;AAAA,eAAU,KAAK,IAAL,KAAc,IAAd,IAAsB,KAAK,IAAL,CAAU,MAAV,KAAqB,aAArD;AAAA,OADX,C;AAAA,OAEI,GAFJ,CAEQ,UAAC,IAAD,EAAU;AACb,YAAI,YAAY,iBAAiB,KAAK,IAAL,CAAU,GAA3B,CAAhB;;;;AAIA,eAAO;AACL,iBAAO,KAAK,IAAL,CAAU,KADZ;AAEL,eAAK,KAAK,IAAL,CAAU,GAFV;AAGL,mBAAS,UAAU,EAHd;AAIL,qBAAW,UAAU,SAJhB;AAKL,wBAAc,QAAQ,oBAAR,EAA8B,KAAK,IAAL,CAAU,SAAxC,CALT;AAML,mBAAS,KAAK,IAAL,CAAU,OANd;AAOL,2CAA+B,KAAK,IAAL,CAAU,SAPpC;AAQL,uBAAa,KAAK,IAAL,CAAU,KARlB;AASL,qBAAW,KAAK,IAAL,CAAU,SAThB;AAUL,iBAAO;AAVF,SAAP;AAYD,OAnBJ,EAoBI,KApBJ,EAAP;AAqBD;;;AAGD,aAAS,WAAT,CAAqB,QAArB,EAA+B;AAC7B,UAAI,aAAa;AACf,iBAAS,GADM;AAEf,kBAAU,GAFK;AAGf,iBAAS;AAHM,OAAjB;;AAMA,aAAO,EAAE,QAAF,EACE,GADF,CACM,gBAAQ;AACX,aAAK,KAAL,GAAa,KAAK,KAAL,CAAW,OAAX,CAAmB,uBAAnB,EAA4C;AAAA,iBAAS,WAAW,KAAX,CAAT;AAAA,SAA5C,CAAb,EACA,KAAK,KAAL,GAAa,EAAE,QAAF,CAAW,uBAAX,CADb;AAEA,eAAO,IAAP;AACD,OALF,EAME,KANF,EAAP;AAOD;;AAED,aAAS,YAAT,CAAsB,OAAtB,EAA+B;AAC7B,UAAI,iBAAiB,EAAE,KAAK,KAAP,EAAc,MAAd,CAAqB;AAAA,eAAQ,KAAK,OAAL,KAAiB,QAAQ,OAAjC;AAAA,OAArB,EAA+D,KAA/D,GAAuE,MAA5F;;AAEA,aAAO,iBAAiB,CAAjB,GAAqB,KAArB,GAA6B,IAApC;AACD;;AAED,aAAS,OAAT,GAAmB;AACjB,UAAI,WAAW,GAAG,KAAH,EAAf;AACA,UAAG,CAAC,UAAJ,EAAgB;AACd,YAAG,SAAH,EAAc;AACZ,eAAK,KAAL,CAAW,iBAAX,EAA8B,SAA9B,EAAyC,IAAzC,CACE;AAAA,mBAAY,SAAS,OAAT,CAAiB,QAAjB,CAAZ;AAAA,WADF,EAEE;AAAA,mBAAM,SAAS,MAAT,EAAN;AAAA,WAFF;AAID,SALD,MAKO;AACL,eAAK,IAAL,CAAU,0CAAV;AACA,mBAAS,MAAT;AACD;AACF;;AAED,aAAO,SAAS,OAAhB;AACD;;AAED,aAAS,UAAT,GAAsB;AACpB,WAAK,KAAL,GAAa,EAAb;AACD;AACF;AACF,CAjKA;;;ACAD,CAAC,CAAC,YAAW;AACX;;AAEA,MAAI,mBAAmB;AACrB,gBAAY,CADS;AAErB,qBAAiB,KAFI;AAGrB,mBAAe,KAHM;AAIrB,aAAS,CAAC;AACR,YAAM,QADE;AAER,cAAQ,0BAFA;AAGR,iBAAW;AAHH,KAAD;AAJY,GAAvB;;AAWA,UAAQ,MAAR,CAAe,WAAf,EACG,OADH,CACW,iBADX,EAC8B,CAAC,qBAAD,EAAwB,UAAS,mBAAT,EAA8B;AAChF,QAAI,sBAAsB,UAA1B;QACI,WAAW,oBAAoB,GAApB,CAAwB,mBAAxB,CADf;;AAGA,QAAG,aAAa,IAAhB,EAAsB;AACpB,iBAAW,gBAAX;AACA;AACD;;AAED,MAAE,YAAF,CAAe,QAAf,EAAyB,gBAAzB;AACA;;AAEA,aAAS,GAAT,CAAa,IAAb,EAAmB,OAAnB,EAA4B;AAC1B,eAAS,IAAT,IAAiB,OAAjB;AACA;AACD;;AAED,aAAS,MAAT,CAAgB,IAAhB,EAAsB;AACpB,UAAG,OAAO,SAAS,IAAT,CAAP,KAA0B,WAA7B,EAA0C;AACxC,iBAAS,IAAT,IAAiB,CAAC,SAAS,IAAT,CAAlB;AACA;AACD,OAHD,MAGO;AACL,iBAAS,IAAT,IAAiB,IAAjB;AACD;AACF;;AAED,aAAS,GAAT,CAAa,IAAb,EAAmB,KAAnB,EAA0B;AACxB,eAAS,IAAT,IAAiB,KAAjB;AACA;AACD;;AAED,aAAS,aAAT,GAAyB;AACvB,0BAAoB,GAApB,CAAwB,mBAAxB,EAA6C,QAA7C;AACD;;;AAGD,WAAO,EAAE,MAAM,QAAR,EAAkB,QAAlB,EAAuB,cAAvB,EAA+B,QAA/B,EAAP;AACD,GArC2B,CAD9B;AAwCD,CAtDA;;;ACAD,CAAC,CAAC,YAAW;AACX;;AAEA,UAAQ,MAAR,CAAe,WAAf,EACG,OADH,CACW,gBADX,EAC6B,YAAW;;AAEpC,SAAK,KAAL,GAAa,IAAI,SAAS,YAAT,GAAwB;AACvC,UAAI,gBAAgB,MAApB;AACA,UAAI,YAAY,EAAhB;;AAEA,UAAM,MAAM,SAAN,GAAM;AAAA,eACV,gBAAgB,KADN;AAAA,OAAZ;;AAGA,UAAM,MAAM,SAAN,GAAM;AAAA,eACV,aADU;AAAA,OAAZ;;AAGA,UAAM,kBAAkB,SAAlB,eAAkB;AAAA,eACtB,EAAE,IAAF,CAAO,SAAP,EAAkB;AAAA,iBAAY,SAAS,aAAT,CAAZ;AAAA,SAAlB,CADsB;AAAA,OAAxB;;AAGA,UAAM,mBAAmB,SAAnB,gBAAmB,WAAY;AACnC,oBAAY,CAAC,QAAD,EAAW,MAAX,CAAkB,SAAlB,CAAZ;AACA,eAAO,QAAP;AACD,OAHD;;AAKA,UAAM,qBAAqB,SAArB,kBAAqB;AAAA,eACzB,YAAY,EAAE,OAAF,CAAU,SAAV,EAAqB,QAArB,CADa;AAAA,OAA3B;;AAGA,UAAM,qBAAqB,SAArB,kBAAqB;AAAA,eACzB;AAAA,iBAAM,mBAAmB,QAAnB,CAAN;AAAA,SADyB;AAAA,OAA3B;;AAGA,aAAO;AACL,gBADK;AAEL,aAAK,EAAE,IAAF,CAAO,GAAP,EAAY,eAAZ,CAFA;AAGL,mBAAW,EAAE,IAAF,CAAO,gBAAP,EAAyB,kBAAzB;AAHN,OAAP;AAKD,KA7BY,EAAb;;AA+BA,SAAK,MAAL,GAAc,IAAd;;AAEA,SAAK,MAAL,GAAc,UAAS,WAAT,EAAsB;AAClC,WAAK,MAAL,GAAc,eAAe,CAAC,KAAK,MAAnC;AACD,KAFD;;AAIA,SAAK,KAAL,GAAa,YAAW;AACtB,WAAK,MAAL,GAAc,KAAd;AACD,KAFD;AAGD,GA3CH;AA4CD,CA/CA;;;ACAD,CAAC,CAAC,YAAM;AACN;;AAEA,UACG,MADH,CACU,WADV,EAEG,SAFH,CAEa,eAFb,EAE8B;AAC1B,cAAU,EADgB;AAE1B,iBAAa,mCAFa;AAG1B,gBAAY,CAAC,iBAAD,EAAoB,SAApB,EAA+B,UAA/B,EAA2C,UAAS,eAAT,EAA0B,OAA1B,EAAmC,QAAnC,EAA6C;;AAElG,WAAK,QAAL,GAAgB,gBAAgB,IAAhC;;;AAGA,WAAK,mBAAL,GAA2B,mBAA3B;AACA,WAAK,eAAL,GAAuB,eAAvB;AACA,WAAK,iBAAL,GAAyB,iBAAzB;;AAEA,UAAG,gBAAgB,IAAhB,CAAqB,aAAxB,EAAuC;AACrC,gBAAQ,gBAAR,CAAyB,MAAzB,EAAiC,iBAAjC;AACD;;AAED,eAAS,mBAAT,GAA+B;AAC7B,wBAAgB,MAAhB,CAAuB,iBAAvB;AACD;;AAED,eAAS,eAAT,GAA2B;AACzB,wBAAgB,MAAhB,CAAuB,oBAAvB;AACD;;AAED,eAAS,iBAAT,GAA6B;AAC3B,wBAAgB,MAAhB,CAAuB,eAAvB;AACA,gBAAQ,CAAC,gBAAgB,IAAhB,CAAqB,aAArB,GAAqC,KAArC,GAA6C,QAA9C,IAA0D,eAAlE,EAAmF,MAAnF,EAA2F,iBAA3F;AACD;;;AAGD,eAAS,iBAAT,GAA6B;AAC3B,iBAAS;AAAA,iBAAM,QAAQ,KAAR,EAAN;AAAA,SAAT,EAAgC,GAAhC;AACD;AAEF,KA/BW;AAHc,GAF9B;AAsCD,CAzCA;;;ACAD,CAAC,CAAC,YAAM;AACN;;AAEA,UACG,MADH,CACU,WADV,EAEG,SAFH,CAEa,cAFb,EAE6B;AACzB,cAAU;AACR,wBAAkB;AADV,KADe;AAIzB,iBAAa,kCAJY;AAKzB,gBAAY,CAAC,uBAAD,EAA0B,UAAS,qBAAT,EAAgC;AACpE,WAAK,cAAL,GAAsB,sBAAsB,OAAtB,EAAtB;;AAEA,WAAK,mBAAL,GAA2B,CACzB,EAAE,MAAM,QAAR,EADyB,EAEzB,EAAE,MAAM,cAAR,EAFyB,EAGzB,EAAE,MAAM,eAAR,EAHyB,EAIzB,EAAE,MAAM,cAAR,EAJyB,EAKzB,EAAE,MAAM,aAAR,EALyB,EAMzB,EAAE,MAAM,OAAR,EANyB,EAOzB,EAAE,MAAM,qBAAR,EAPyB,CAA3B;AASD,KAZW;AALa,GAF7B;AAqBD,CAxBA;;;ACAD,CAAC,CAAC,YAAM;AACN;;AAEA,UACG,MADH,CACU,WADV,EAEG,SAFH,CAEa,aAFb,EAE4B;AACxB,cAAU,EADc;AAExB,iBAAa,iCAFW;AAGxB,gBAAY,CAAC,OAAD,EAAU,UAAS,KAAT,EAAgB;AACpC,WAAK,eAAL,GAAuB,EAAvB;;AAEA,WAAK,cAAL,GAAsB,YAAW;AAAA;;AAC/B,cAAM,GAAN,CAAU,kEAAV,EACC,IADD,CACM;AAAA,iBAAQ,MAAK,eAAL,GAAuB;AACnC,iBAAK,KAAK,IAAL,CAAU,QADoB;AAEnC,kBAAM,KAAK,IAAL,CAAU,MAAV,CAAiB,MAAjB,CAAwB,IAFK;AAGnC,qBAAS,KAAK,IAAL,CAAU,MAAV,CAAiB;AAHS,WAA/B;AAAA,SADN;AAMD,OAPD;;AASA,WAAK,cAAL;AACD,KAbW;AAHY,GAF5B;AAoBD,CAvBA;;;ACAD,CAAC,CAAC,YAAM;AACN;;AAEA,UACG,MADH,CACU,WADV,EAEG,SAFH,CAEa,aAFb,EAE4B;AACxB,cAAU;AACR,iBAAW,GADH;AAER,wBAAkB,GAFV;AAGR,oBAAc,GAHN;AAIR,qBAAe,GAJP;AAKR,uBAAiB;AALT,KADc;AAQxB,iBAAa;AARW,GAF5B;AAYD,CAfA;;;ACAD,CAAC,CAAC,YAAW;AACX;;AAEA,UACG,MADH,CACU,WADV,EAEG,SAFH,CAEa,aAFb,EAE4B;AACxB,cAAU;AACR,YAAM,GADE;AAER,wBAAkB,GAFV;AAGR,iBAAW,GAHH;AAIR,mBAAa,GAJL;AAKR,qBAAe;AALP,KADc;AAQxB,iBAAa;AARW,GAF5B;AAaD,CAhBA;;;ACAD,CAAC,CAAC,YAAW;AACX;;AAEA,UACG,MADH,CACU,WADV,EAEG,SAFH,CAEa,SAFb,EAEwB;AACpB,cAAU,EADU;AAEpB,iBAAa,4BAFO;AAGpB,gBAAY,CAAC,iBAAD,EAAoB,eAApB,EAAqC,gBAArC,EAAuD,iBAAvD,EAA0E,YAA1E,EAAwF,UAAS,eAAT,EAA0B,aAA1B,EAAyC,cAAzC,EAAyD,eAAzD,EAA0E,UAA1E,EAAsF;AAAA;;;AAExL,WAAK,gBAAL,GAAwB,EAAxB;AACA,WAAK,SAAL,GAAiB,KAAjB;AACA,WAAK,QAAL,GAAgB,gBAAgB,QAAhC;AACA,WAAK,YAAL,GAAoB,eAAe,KAAf,CAAqB,GAArB,EAApB;;;AAGA,WAAK,SAAL,GAAiB,SAAjB;AACA,WAAK,MAAL,GAAc,MAAd;AACA,WAAK,SAAL,GAAiB,SAAjB;AACA,WAAK,cAAL,GAAsB,cAAtB;AACA,WAAK,gBAAL,GAAwB,gBAAxB;AACA,WAAK,mBAAL,GAA2B,mBAA3B;;AAEA,sBAAgB,iBAAhB,CAAkC,YAAM;AACtC,cAAK,QAAL,GAAgB,gBAAgB,QAAhC;AACD,OAFD;;AAIA,qBAAe,KAAf,CAAqB,SAArB,CAA+B,iBAAS;AACtC,cAAK,YAAL,GAAoB,KAApB;;AAEA,YAAG,UAAU,MAAb,EAAqB;AACnB,qBAAW,UAAX,CAAsB,yBAAtB;AACD;AACF,OAND;;AAQA,eAAS,SAAT,CAAmB,IAAnB,EAAyB;AACvB,sBAAc,SAAd,CAAwB,IAAxB;;AAEA,YAAG,CAAC,gBAAgB,IAAhB,CAAqB,eAAzB,EAA0C;AACxC,yBAAe,MAAf;AACD;AACF;;AAED,eAAS,cAAT,GAA0B;AAAA;;AACxB,aAAK,SAAL,GAAiB,IAAjB;;AAEA,wBACC,cADD,GAEC,IAFD,CAEM;AAAA,iBAAO,OAAK,SAAL,GAAiB,KAAxB;AAAA,SAFN;AAGD;;AAED,eAAS,gBAAT,CAA0B,SAA1B,EAAqC;AAAA;;AACnC,wBAAgB,KAAhB;;AAEA,YAAG,CAAC,CAAC,SAAF,IAAe,CAAC,KAAK,SAAxB,EAAmC;AACjC,eAAK,gBAAL,GAAwB,SAAxB;AACA,eAAK,SAAL,GAAiB,IAAjB;;AAEA,0BACG,cADH,CACkB,SADlB,EAEG,IAFH,CAEQ,oBAAY;AAChB,mBAAK,SAAL,GAAiB,KAAjB;AACA,mBAAK,QAAL,GAAgB,QAAhB;;AAEA,0BAAc,SAAd,CAAwB,gBAAgB,QAAhB,CAAyB,CAAzB,CAAxB;AACD,WAPH;AAQD;;AAED,YAAG,CAAC,SAAJ,EAAe;AACb,eAAK,SAAL,GAAiB,KAAjB;AACD;AACF;;AAED,eAAS,SAAT,GAAqB;AACnB,eAAO,eAAe,MAAtB;AACD;;AAED,eAAS,MAAT,GAAkB;AAChB,uBAAe,MAAf;AACD;;AAED,eAAS,mBAAT,CAA6B,KAA7B,EAAoC;AAClC,YAAI,UAAU,eAAe,KAAf,CAAqB,GAArB,EAAd;AACA,uBAAe,KAAf,CAAqB,GAArB,CAAyB,YAAY,MAAZ,GAAqB,UAArB,GAAkC,MAA3D;AACD;AACF,KA7EW;AAHQ,GAFxB;AAqFD,CAxFA;;;ACAD,CAAC,CAAC,YAAM;AACN;;AAEA,UACG,MADH,CACU,WADV,EAEG,SAFH,CAEa,WAFb,EAE0B;AACtB,cAAU;AACR,YAAM,YADE;AAER,wBAAkB,mBAFV;AAGR,aAAO;AAHC,KADY;AAMtB,iBAAa,uBANS;AAOtB,gBAAY,CAAC,eAAD,EAAkB,UAAS,aAAT,EAAwB;;AAEpD,WAAK,aAAL,GAAqB,aAArB;;;AAGA,WAAK,cAAL,GAAsB,cAAtB;;AAEA,eAAS,cAAT,GAAiC;AAAA,YAAT,EAAS,yDAAJ,EAAI;;AAC/B,eAAO,OAAO,cAAc,gBAAd,CAA+B,KAA7C;AACD;AACF,KAVW;AAPU,GAF1B;AAqBD,CAxBA","file":"public/js/app.js","sourcesContent":[";(() => {\n  angular\n    .module('orodarius', [\n      'LocalStorageModule',\n      'ngAnimate'\n    ]);\n\n  angular\n    .module('orodarius')\n    .config(function(localStorageServiceProvider) {\n      localStorageServiceProvider.setPrefix('orodarius');\n    })\n\n  angular\n    .module('orodarius')\n    .run(function($window) {\n      $($window).on('resize', _.throttle(function() {\n        $('#main-video-player')\n          .attr('width', $window.innerWidth)\n          .attr('height', $window.innerHeight);\n      }, 400));\n    });\n})();\n\n",";(function() {\n  'use strict';\n\n  angular.module('orodarius')\n    .directive('ngBindKeys', ['$document', function($document) {\n      return {\n        restrict: 'A',\n        scope: {\n          ngBindKeysOptions: '=ngBindKeys'\n        },\n        link: function(scope, element, attr) {\n          var keyCodes = _(scope.ngBindKeysOptions).map((fn, keyCode) => keyCode).value();\n\n          $document.on('keydown', function(event) {\n            if(event.target.nodeName !== 'INPUT') {\n              var currentKeyCode = event.which || event.keyCode;\n\n              if(scope.ngBindKeysOptions[currentKeyCode]) {\n                event.preventDefault();\n                scope.ngBindKeysOptions[currentKeyCode].call({}, event);\n              }\n            }\n          });\n        }\n      };\n    }]);\n\n})();\n",";(() => {\n  angular.module('orodarius')\n    .directive('ngEnter', () => {\n      return {\n        restrict: 'A',\n        replace: false,\n        scope: {\n          ngEnter: '&',\n          ngEnterOptions: '='\n        },\n        link: (scope, element, attr) => {\n          element.on('keypress', event => {\n            if(event.which === 13 || event.keyCode === 13) {\n              scope.ngEnter.call();\n\n              if(scope.ngEnterOptions.blurOnEnter) {\n                $(element).blur();\n              }\n\n              scope.$apply();\n            }\n          });\n        }\n      };\n    });\n})();\n\n",";(function() {\n  'use strict';\n\n  angular.module('orodarius')\n    .directive('ngInputChange', function() {\n      return {\n        restrict: 'A',\n        scope: {\n          ngInputChange: '&'\n        },\n        replace: false,\n        link: function(scope, element, attrs) {\n          $(element).on('change input', function() {\n            scope.ngInputChange.call(null);\n          });\n\n          scope.$on('$destroy', function() {\n            $(element).off('change input');\n          });\n        }\n      };\n    });\n\n})();\n",";(function() {\n  'use strict';\n\n  angular\n    .module('orodarius')\n    .directive('ngScrollTo', ['$rootScope', '$timeout', function($rootScope, $timeout) {\n      return {\n        restrict: 'A',\n        scope: {\n          ngScrollTo: '=',\n          offsetTop: '@'\n        },\n        link: function(scope, element) {\n          let $element = $(element);\n\n          $rootScope.$on('orodariusScrollIntoView', () => {\n            $timeout(() => {\n              let elementToScrollTo = $(element).find(scope.ngScrollTo);\n\n              if(elementToScrollTo.length) {\n                $element.get(0).scrollTop = 0;\n                $element.get(0).scrollTop = elementToScrollTo.position().top - (parseInt($element.css('padding-top'), 10) || 0) - parseInt(scope.offsetTop, 10);\n              }\n            }, 100);\n          });\n        }\n      };\n    }]);\n})();\n\n",";(function() {\n  'use strict';\n\n  angular.module('orodarius')\n    .directive('youtubePlayer', ['$window', 'PlayerService', function($window, PlayerService) {\n      return {\n        restrict: 'A',\n        replace: false,\n        link: function(scope, element, attrs) {\n          // scope.isDisabled comes from karma tests.\n          // TODO: nothing like that should be done, figure out how to\n          // prevent script src loading during karma tests\n          if(!scope.isDisabled) {\n            var tag = $('<script>').attr({\n              src: 'https://www.youtube.com/iframe_api',\n              async: true\n            });\n\n            // this is suggested here:\n            // https://developers.google.com/youtube/iframe_api_reference#Getting_Started\n            // not sure if it really needs to be first\n            $('script').eq(0).before(tag);\n          }\n\n          $window.onYouTubeIframeAPIReady = function() {\n            PlayerService.createNewPlayer(attrs.youtubePlayer || 'main-video-player');\n          };\n        }\n      };\n    }]);\n})();\n\n",";(() => {\n  'use strict';\n\n  angular.module('orodarius').factory('youtubeUrlParser', function() {\n    // inspiration or, basically, stealing from:\n    // https://github.com/honestbleeps/Reddit-Enhancement-Suite/blob/ebf015e5b78780f7c86e0c9ae5fde45af2c68fff/lib/modules/hosts/youtube.js#L11\n\n    var hashRe = /^(?:https?:)?(?:\\/\\/)?(?:www\\.|m\\.)?youtube\\.com\\/watch\\?.*v=([\\w\\-]+)/i,\n        altHashRe = /^https?:\\/\\/(?:www\\.)?youtu\\.be\\/([\\w\\-]+)/i;\n\n    function getVideoInfoFromUrl(url) {\n      var groups = hashRe.exec(url);\n\n      if(!groups) {\n        groups = altHashRe.exec(url);\n      }\n\n      if(groups) {\n        // Check url for timecode e.g t=1h23m15s\n        var timecodeRe = /t=(.*?)&|t=(.*?)$/i,\n            starttime = 0,\n            timecodeResult = timecodeRe.exec(url);\n\n        if(timecodeResult !== null) {\n          var time_blocks = {'h':3600, 'm':60, 's':1},\n              timeRE = /[0-9]+[h|m|s]/ig;\n\n          // Get each segment e.g. 8m and calculate its value in seconds\n          var timeMatch = timecodeResult[0].match(timeRE);\n\n          if(timeMatch) {\n            timeMatch.forEach(function(ts){\n              var unit = time_blocks[ts.charAt(ts.length-1)],\n                  amount = parseInt(ts.slice(0, - 1), 10);\n\n              // Add each unit to starttime\n              starttime += unit * amount;\n            });\n          } else {\n            // support direct timestamp e.g. t=200\n            starttime = parseInt(timecodeResult[0].replace('t=',''), 10);\n            if (isNaN(starttime)) {\n              starttime = 0;\n            }\n          }\n        }\n\n        return {\n          id: groups[1],\n          starttime: starttime\n        };\n      } else {\n        return '';\n      }\n    }\n\n    return getVideoInfoFromUrl;\n  });\n})();\n",";(() => {\n  'use strict';\n\n  angular.module('orodarius').filter('thumbnailUrlFilter', function() {\n    return function(thumbnailUrl) {\n      switch(thumbnailUrl) {\n        case 'nsfw':\n          return 'images/nsfw-thumbnail.jpg';\n        case 'default':\n          return 'images/default-thumbnail.png';\n      }\n\n      return thumbnailUrl;\n    };\n  });\n})();\n\n",";(() => {\n  'use strict';\n\n  angular\n    .module('orodarius')\n    .component('playerOverlay', playerOverlayComponent());\n\n  function playerOverlayComponent() {\n    return {\n      bindings: {},\n      templateUrl: 'views/player-overlay.html',\n      controller: ['PlayerService', function(PlayerService) {\n        this.getCurrentVideoItem = () => PlayerService.currentVideoItem;\n      }]\n    };\n  }\n})();\n\n",";(() => {\n  'use strict';\n\n  angular\n    .module('orodarius')\n    .component('player', {\n      bindings: {},\n      templateUrl: 'views/player.html',\n      controller: function() {\n      }\n    });\n})();\n\n",";(() => {\n  'use strict';\n\n  angular\n    .module('orodarius')\n    .component('root', {\n      bindings: {},\n      templateUrl: 'views/root.html',\n      controller: ['$scope', 'PlayerService', 'PlaylistService', 'SidebarService', function($scope, PlayerService, PlaylistService, SidebarService) {\n        this.keyboardEventsOptions = {\n          38() { playPrevious(); }, // up\n          37() { playPrevious(); }, // left\n          39() { playNext(); }, // right\n          40() { playNext(); }, // down\n          32() { PlayerService.playOrPause(); }, // space\n          16: event => { // shift\n            SidebarService.toggle();\n            $scope.$apply();\n          },\n          27: event => { // escape\n            if(SidebarService.state.get() === 'settings') {\n              SidebarService.state.set('main');\n            } else {\n              SidebarService.close();\n            }\n\n            $scope.$apply();\n          },\n          83: event => { // s\n            if(SidebarService.state.get() !== 'settings') {\n              SidebarService.state.set('settings');\n              $scope.$apply();\n            }\n          }\n        };\n\n        function playPrevious() {\n          if(PlaylistService.playlist.length) {\n            PlayerService.playPrevious();\n            $scope.$apply();\n          }\n        }\n\n        function playNext() {\n          if(PlaylistService.playlist.length) {\n            PlayerService.playNext();\n            $scope.$apply();\n          }\n        }\n      }]\n    });\n})();\n\n",";(() => {\n  // TODO: this will eventually be lastQueriesService or something\n  angular.module('orodarius')\n    .service('LastSubredditsService', ['localStorageService', function(localStorageService) {\n      let lastSubredditsStorageName = 'lastSubreddits',\n          lastSubredditsLimit = 10;\n\n      let lastSubreddits = localStorageService.get(lastSubredditsStorageName);\n\n      if(!angular.isArray(lastSubreddits)) {\n        lastSubreddits = [];\n      }\n\n      function addItem(item) {\n        if(isItemDuplicate(item)) { return; }\n\n        lastSubreddits.unshift(item);\n        lastSubreddits = lastSubreddits.slice(0, lastSubredditsLimit);\n\n        updateLocalStorage();\n      }\n\n      function isItemDuplicate(item) {\n        return _.findIndex(lastSubreddits, obj => item.name === obj.name) !== -1;\n      }\n\n      function updateLocalStorage() {\n        localStorageService.set('lastSubreddits', lastSubreddits);\n      }\n\n      function getList() {\n        return lastSubreddits;\n      }\n\n      return {\n        getList,\n        add: addItem\n      };\n    }]);\n})();\n\n",";(function() {\n  'use strict';\n\n  angular.module('orodarius')\n    .service('PlayerService', ['$window', '$timeout', 'PlaylistService', 'SettingsService', '$rootScope', function($window, $timeout, PlaylistService, SettingsService, $rootScope) {\n      this.youtubePlayer = null; // youtube iframe api instance\n      this.isPlaying = false;\n      this.currentVideoItem = {};\n\n      this.markCurrentVideoItemWithError = function(errorCode) {\n        var currentItemIndex = _.findIndex(PlaylistService.playlist, item => item.ownId === this.currentVideoItem.ownId);\n\n        PlaylistService.playlist[currentItemIndex].error = {\n          code: errorCode,\n          message: errorMessage(errorCode)\n        };\n      };\n\n      this.createNewPlayer = function(elementId, options) {\n        var defaultPlayerOptions = {\n          width: $window.innerWidth, // TODO: perhaps move to settings value\n          height: $window.innerHeight,\n          videoId: 'ZGXh-kgedkI',\n          playerVars: {\n            autohide: 1,\n            autoplay: 0,\n            controls: 1,\n            disablekb: 1,\n            enablejsapi: 1\n          }\n        };\n\n        angular.extend(defaultPlayerOptions, options);\n\n        // YT should be available since it comes from iframe_api\n        this.youtubePlayer = new YT.Player(elementId || 'main-video-player', defaultPlayerOptions);\n\n        this.youtubePlayer.addEventListener('onReady', onPlayerReady.bind(this));\n        this.youtubePlayer.addEventListener('onError', onPlayerError.bind(this));\n        this.youtubePlayer.addEventListener('onStateChange', this.onPlayerStateChange.bind(this));\n\n        return this.youtubePlayer;\n      };\n\n      this.playVideo = function(item) {\n        if(this.youtubePlayer && this.youtubePlayer.loadVideoById && item) {\n          // TODO: skip misunderstood urls for now\n          if(item.url === false) {\n            this.playNext();\n            return;\n          }\n\n          this.youtubePlayer.loadVideoById({\n            videoId: item.videoId,\n            startSeconds: item.starttime || 0,\n            suggestedQuality: 'default'\n          });\n\n          this.currentVideoItem = item;\n          this.isPlaying = true;\n          SettingsService.set('watchCount', SettingsService.list.watchCount + 1);\n        }\n\n        $timeout(); // TODO :(\n      };\n\n      this.playNext = function() {\n        var nextVideoItemIndex = _.findIndex(PlaylistService.playlist, currentItemMatcher.bind(this)) + 1;\n\n        // TODO: it'd probably make more sense if PlaylistService take care of itself rather than this PlayerService\n        if(nextVideoItemIndex >= Math.max(PlaylistService.playlist.length - 3, 0)) {\n          PlaylistService.expandPlaylist().then(data => {\n            this.playVideo(PlaylistService.playlist[nextVideoItemIndex]);\n            $rootScope.$emit('orodariusScrollIntoView');\n          });\n        } else {\n          this.playVideo(PlaylistService.playlist[nextVideoItemIndex]);\n          $rootScope.$emit('orodariusScrollIntoView');\n        }\n      };\n\n      this.playPrevious = function() {\n        var previousVideoItemIndex = _.findIndex(PlaylistService.playlist, currentItemMatcher.bind(this)) - 1;\n        this.playVideo(PlaylistService.playlist[previousVideoItemIndex < 0 ? 0 : previousVideoItemIndex], 'previous');\n        $rootScope.$emit('orodariusScrollIntoView');\n      };\n\n      this.playOrPause = function() {\n        if(this.isPlaying) {\n          this.youtubePlayer.pauseVideo();\n          this.isPlaying = false;\n        } else {\n          this.youtubePlayer.playVideo();\n          this.isPlaying = true;\n        }\n      };\n\n      this.resetCurrentVideoItem = function() {\n        this.currentVideoItem = undefined;\n      };\n\n      this.onPlayerStateChange = function(event) {\n        // event.data holds event type, one of the following:\n        // -1 (unstarted)\n        // 0 (ended)\n        // 1 (playing)\n        // 2 (paused)\n        // 3 (buffering)\n        // 5 (video cued).\n\n\n        if(SettingsService.list.isFocusForced) {\n          document.activeElement.blur();\n        }\n\n        if(SettingsService.list.isFlashModeEnabled && event.data === 1) {\n          $timeout(() => {\n            this.playNext();\n          }, 5000)\n        }\n        // if event is 0 (ended), play another video.\n        if (event.data === 0) {\n          this.playNext();\n        }\n      }\n\n      function onPlayerReady() {\n        // player.playVideo();\n      }\n\n      function onPlayerError(event) {\n        // https://developers.google.com/youtube/iframe_api_reference#onError\n        if([2, 5, 100, 101, 150].indexOf(event.data) != -1) {\n          this.markCurrentVideoItemWithError(event.data);\n          // TODO: stop trying after n tries\n          this.playNext();\n        }\n      }\n\n      function currentItemMatcher(item) {\n        return item.ownId === this.currentVideoItem.ownId;\n      }\n\n      function errorMessage(code) {\n        switch (code) {\n          case 2:\n            return \"can't parse video ID\";\n          case 5:\n            return \"problem with HTML5 Youtube player\";\n          case 100:\n            return \"video is private or removed\";\n          case 101:\n          case 150:\n            return \"uploader does not allow embedded playback\";\n        }\n      }\n\n    }]);\n})();\n\n",";(function() {\n  'use strict';\n\n  angular.module('orodarius')\n    .service('PlaylistService', ['RedditService', function(RedditService) {\n      let playlistSubscriberFns = [];\n\n      // Public values\n      this.playlist = [];\n      this.isLoading = false;\n\n      // Public methods\n      this.add = add;\n      this.clear = clear;\n      this.fetchSubreddit = fetchSubreddit;\n      this.expandPlaylist = expandPlaylist;\n      this.subscribePlaylist = subscribePlaylist;\n\n      function add(item) {\n        this.playlist.push(item);\n        publishSubscribers();\n        return this.playlist;\n      }\n\n      function fetchSubreddit(subredditName = '') {\n        this.isLoading = true;\n\n        return RedditService\n          .fetch(subredditName)\n          .then(newItems => {\n            if(newItems) {\n              this.playlist = this.playlist.concat(newItems);\n              publishSubscribers();\n              return newItems;\n            }\n          }, angular.noop)\n          .finally(() => this.isLoading = false);\n      }\n\n      function expandPlaylist() {\n        this.isLoading = true;\n\n        return RedditService\n          .getNext()\n          .then(newItems => {\n            if(newItems) {\n              this.playlist = this.playlist.concat(newItems);\n              publishSubscribers();\n            }\n          }, angular.noop)\n          .finally(() => this.isLoading = false);\n      }\n\n      function clear() {\n        this.playlist = [];\n        publishSubscribers();\n      }\n\n      function subscribePlaylist(subscriberFn) {\n        playlistSubscriberFns.push(subscriberFn);\n      }\n\n      function publishSubscribers() {\n        playlistSubscriberFns.map(fn => fn());\n      }\n    }]);\n})();\n\n",";(() => {\n  'use strict';\n\n  angular\n    .module('orodarius')\n    .service('RedditService', [\n      '$http',\n      '$q',\n      'youtubeUrlParser',\n      '$filter',\n      'LastSubredditsService',\n      '$log',\n      RedditService\n    ]);\n\n  function RedditService($http, $q, youtubeUrlParser, $filter, LastSubredditsService, $log) {\n    let NUM_FETCH_RETRIES = 0,\n        NUM_MAX_FETCH_RETRIES = 3, // means there might be at most 4 consecutive GETs until proper data received\n        AFTER_TAG = '',\n        IS_LOADING = false,\n        CURRENT_SUBREDDIT = '';\n\n    this.fetch = fetch;\n    this.items = [];\n    this.getNext = getNext;\n    this.clearCache = clearCache;\n\n    const API_ROOT_URL = 'http://www.reddit.com/r/';\n\n    function fetch(subredditName = '', afterTag = '') {\n      const deferred = $q.defer(),\n            apiUrl = `${API_ROOT_URL}${subredditName}/hot.json?limit=50` + (afterTag ? `&after=${afterTag}` : '');\n\n      AFTER_TAG = afterTag;\n      CURRENT_SUBREDDIT = subredditName;\n      IS_LOADING = true;\n\n      if(_.isEmpty(subredditName)) {\n        deferred.reject();\n      } else {\n        $http\n          .get(apiUrl)\n          .success(onFetchSuccess.bind(this))\n          .error(onFetchFailure.bind(this));\n      }\n\n      function onFetchSuccess(data, status, headers, config) {\n        const fetchedData = data.data;\n\n        NUM_FETCH_RETRIES++;\n        AFTER_TAG = fetchedData.after;\n        IS_LOADING = false;\n\n        let newItems = uniquefyVideoItems(subredditResultsFilter(fetchedData.children));\n\n        if(newItems.length) {\n          // TODO: move out of reddit service, this is will not be reddit specific in the\n          // future when more sources will be available\n          LastSubredditsService.add({ name: subredditName });\n        }\n\n        if(newItems.length === 0 && NUM_FETCH_RETRIES <= NUM_MAX_FETCH_RETRIES) {\n          fetch.call(this, subredditName, AFTER_TAG, deferred);\n        } else {\n          let processNewItems = postProcess(newItems),\n              uniqueNewItems = _.filter(newItems, item => compareOldTo.call(this, item));\n\n          this.items = this.items.concat(uniqueNewItems);\n\n          NUM_FETCH_RETRIES = 0;\n\n          deferred.resolve(uniqueNewItems);\n        }\n      }\n\n      function onFetchFailure(data, status, headers, config) {\n        IS_LOADING = false;\n        deferred.reject(data);\n      }\n\n      return deferred.promise;\n    }\n\n    // TODO: refactor to filter?\n    function uniquefyVideoItems(videoItems) {\n      var stringifiedArray = _(videoItems).map(item => JSON.stringify(item)).value();\n      // console.log(_(_.uniq(stringifiedArray)).map(item => JSON.parse(item)).value().length);\n      return _(_.uniq(stringifiedArray)).map(item => JSON.parse(item)).value();\n    }\n\n    function subredditResultsFilter(data) {\n      // TODO: refactor to allow different sources but output same structure as now\n      // TODO: move this to separate factory which would accept all kinds of sources but output\n      // canonical object for the whole app to use\n      return _(data)\n                .filter((item) => item.kind === 't3' && item.data.domain === 'youtube.com') // t3 - link posts\n                .map((item) => {\n                  var videoInfo = youtubeUrlParser(item.data.url);\n\n                  // this is where playlist\n                  // item is built\n                  return {\n                    title: item.data.title,\n                    url: item.data.url,\n                    videoId: videoInfo.id,\n                    starttime: videoInfo.starttime,\n                    thumbnailUrl: $filter('thumbnailUrlFilter')(item.data.thumbnail),\n                    created: item.data.created,\n                    redditUrl: `http://reddit.com${item.data.permalink}`,\n                    redditScore: item.data.score,\n                    subreddit: item.data.subreddit,\n                    error: null\n                  };\n                })\n                .value();\n    }\n\n    // TODO: refactor to filter?\n    function postProcess(newItems) {\n      var sanitizers = {\n        '&amp;': '&',\n        '&copy;': '©',\n        '&reg;': '®'\n      };\n\n      return _(newItems)\n              .map(item => {\n                item.title = item.title.replace(/(&amp;|&copy;|&reg;)/g, match => sanitizers[match]),\n                item.ownId = _.uniqueId('orodarius_video-item_');\n                return item;\n              })\n              .value();\n    }\n\n    function compareOldTo(newItem) {\n      var duplicateItems = _(this.items).filter(item => item.videoId === newItem.videoId).value().length;\n\n      return duplicateItems > 0 ? false : true;\n    }\n\n    function getNext() {\n      let deferred = $q.defer();\n      if(!IS_LOADING) {\n        if(AFTER_TAG) {\n          this.fetch(CURRENT_SUBREDDIT, AFTER_TAG).then(\n            newItems => deferred.resolve(newItems),\n            () => deferred.reject()\n          );\n        } else {\n          $log.warn('cant expand playlist, no afterTag found!');\n          deferred.reject();\n        }\n      }\n\n      return deferred.promise;\n    }\n\n    function clearCache() {\n      this.items = [];\n    }\n  }\n})();\n\n",";(function() {\n  'use strict';\n\n  var DEFAULT_SETTINGS = {\n    watchCount: 0,\n    isSidebarSticky: false,\n    isFocusForced: false,\n    sources: [{\n      name: 'reddit',\n      apiUrl: 'http://www.reddit.com/r/',\n      isEnabled: true\n    }]\n  };\n\n  angular.module('orodarius')\n    .service('SettingsService', ['localStorageService', function(localStorageService) {\n      var settingsStorageName = 'settings',\n          settings = localStorageService.get(settingsStorageName);\n\n      if(settings === null) {\n        settings = DEFAULT_SETTINGS;\n        updateStorage();\n      }\n\n      _.defaultsDeep(settings, DEFAULT_SETTINGS);\n      updateStorage()\n\n      function add(name, setting) {\n        settings[name] = setting;\n        updateStorage();\n      }\n\n      function toggle(name) {\n        if(typeof settings[name] !== 'undefined') {\n          settings[name] = !settings[name];\n          updateStorage();\n        } else {\n          settings[name] = true;\n        }\n      }\n\n      function set(name, value) {\n        settings[name] = value;\n        updateStorage();\n      }\n\n      function updateStorage() {\n        localStorageService.set(settingsStorageName, settings);\n      }\n\n      // TODO: refactor to use get instead of list\n      return { list: settings, add, toggle, set };\n    }]);\n\n})();\n",";(function() {\n  'use strict';\n\n  angular.module('orodarius')\n    .service('SidebarService', function() {\n      // TODO extract this to factory\n      this.state = new function StateManager() {\n        let CURRENT_STATE = 'main';\n        let LISTENERS = [];\n\n        const set = state =>\n          CURRENT_STATE = state;\n\n        const get = () =>\n          CURRENT_STATE;\n\n        const invokeListeners = () =>\n          _.each(LISTENERS, listener => listener(CURRENT_STATE));\n\n        const registerListener = listener => {\n          LISTENERS = [listener].concat(LISTENERS);\n          return listener;\n        }\n\n        const deregisterListener = listener =>\n          LISTENERS = _.without(LISTENERS, listener);\n\n        const createDeregisterer = listener =>\n          () => deregisterListener(listener)\n\n        return {\n          get,\n          set: _.flow(set, invokeListeners),\n          subscribe: _.flow(registerListener, createDeregisterer)\n        };\n      };\n\n      this.isOpen = true;\n\n      this.toggle = function(toggleValue) {\n        this.isOpen = toggleValue || !this.isOpen;\n      };\n\n      this.close = function() {\n        this.isOpen = false;\n      };\n    });\n})();\n",";(() => {\n  'use strict';\n\n  angular\n    .module('orodarius')\n    .component('settingsPanel', {\n      bindings: {},\n      templateUrl: 'views/sidebar/settings-panel.html',\n      controller: ['SettingsService', '$window', '$timeout', function(SettingsService, $window, $timeout) {\n        /* properties */\n        this.settings = SettingsService.list;\n\n        /* methods */\n        this.toggleStickySidebar = toggleStickySidebar;\n        this.toggleFlashMode = toggleFlashMode;\n        this.toggleFocusForced = toggleFocusForced;\n\n        if(SettingsService.list.isFocusForced) {\n          $window.addEventListener('blur', windowBlurHanlder);\n        }\n\n        function toggleStickySidebar() {\n          SettingsService.toggle('isSidebarSticky');\n        }\n\n        function toggleFlashMode() {\n          SettingsService.toggle('isFlashModeEnabled');\n        }\n\n        function toggleFocusForced() {\n          SettingsService.toggle('isFocusForced');\n          $window[(SettingsService.list.isFocusForced ? 'add' : 'remove') + 'EventListener']('blur', windowBlurHanlder);\n        }\n\n        // TODO: need better implementation for firefox. and maybe other browsers\n        function windowBlurHanlder() {\n          $timeout(() => $window.focus(), 100);\n        }\n\n      }]\n    })\n})();\n\n",";(() => {\n  'use strict';\n\n  angular\n    .module('orodarius')\n    .component('sidebarEmpty', {\n      bindings: {\n        onSubredditClick: '&'\n      },\n      templateUrl: 'views/sidebar/sidebar-empty.html',\n      controller: ['LastSubredditsService', function(LastSubredditsService) {\n        this.lastSubreddits = LastSubredditsService.getList();\n\n        this.suggestedSubreddits = [\n          { name: 'videos' },\n          { name: 'youtubehaiku' },\n          { name: 'artisanvideos' },\n          { name: 'listentothis' },\n          { name: 'gamephysics' },\n          { name: 'music' },\n          { name: 'videos+youtubehaiku' }\n        ];\n      }]\n    });\n})();\n\n",";(() => {\n  'use strict';\n\n  angular\n    .module('orodarius')\n    .component('sidebarFoot', {\n      bindings: {},\n      templateUrl: 'views/sidebar/sidebar-foot.html',\n      controller: ['$http', function($http) {\n        this.lastUpdatedData = {};\n\n        this.getLastUpdated = function() {\n          $http.get('https://api.github.com/repos/argshook/orodarius/commits/gh-pages')\n          .then(data => this.lastUpdatedData = {\n            url: data.data.html_url,\n            date: data.data.commit.author.date,\n            message: data.data.commit.message\n          });\n        };\n\n        this.getLastUpdated();\n      }]\n    });\n})();\n\n",";(() => {\n  'use strict';\n\n  angular\n    .module('orodarius')\n    .component('sidebarHead', {\n      bindings: {\n        isLoading: '=',\n        currentSubreddit: '=',\n        currentState: '=',\n        onSearchStart: '&',\n        onSettingsClick: '&'\n      },\n      templateUrl: 'views/sidebar/sidebar-head.html'\n    });\n})();\n\n",";(function() {\n  'use strict';\n\n  angular\n    .module('orodarius')\n    .component('sidebarList', {\n      bindings: {\n        list: '=',\n        currentSubreddit: '=',\n        isLoading: '=',\n        onItemClick: '&',\n        onExpandClick: '&'\n      },\n      templateUrl: 'views/sidebar/sidebar-list.html'\n    }\n  );\n})();\n\n",";(function() {\n  'use strict';\n\n  angular\n    .module('orodarius')\n    .component('sidebar', {\n      bindings: {},\n      templateUrl: 'views/sidebar/sidebar.html',\n      controller: ['PlaylistService', 'PlayerService', 'SidebarService', 'SettingsService', '$rootScope', function(PlaylistService, PlayerService, SidebarService, SettingsService, $rootScope) {\n        /* properties */\n        this.currentSubreddit = '';\n        this.isLoading = false;\n        this.playlist = PlaylistService.playlist;\n        this.currentState = SidebarService.state.get();\n\n        /* methods */\n        this.getIsOpen = getIsOpen;\n        this.toggle = toggle;\n        this.playVideo = playVideo;\n        this.expandPlaylist = expandPlaylist;\n        this.fillPlaylistWith = fillPlaylistWith;\n        this.toggleSettingsState = toggleSettingsState;\n\n        PlaylistService.subscribePlaylist(() => {\n          this.playlist = PlaylistService.playlist;\n        });\n\n        SidebarService.state.subscribe(state => {\n          this.currentState = state;\n\n          if(state === 'main') {\n            $rootScope.$broadcast('orodariusScrollIntoView');\n          }\n        });\n\n        function playVideo(item) {\n          PlayerService.playVideo(item);\n\n          if(!SettingsService.list.isSidebarSticky) {\n            SidebarService.toggle();\n          }\n        };\n\n        function expandPlaylist() {\n          this.isLoading = true;\n\n          PlaylistService\n          .expandPlaylist()\n          .then(() =>  this.isLoading = false);\n        };\n\n        function fillPlaylistWith(subreddit) {\n          PlaylistService.clear();\n\n          if(!!subreddit && !this.isLoading) {\n            this.currentSubreddit = subreddit;\n            this.isLoading = true;\n\n            PlaylistService\n              .fetchSubreddit(subreddit)\n              .then(playlist => {\n                this.isLoading = false;\n                this.playlist = playlist;\n\n                PlayerService.playVideo(PlaylistService.playlist[0]);\n              });\n          }\n\n          if(!subreddit) {\n            this.isLoading = false;\n          }\n        };\n\n        function getIsOpen() {\n          return SidebarService.isOpen;\n        }\n\n        function toggle() {\n          SidebarService.toggle();\n        }\n\n        function toggleSettingsState(state) {\n          let current = SidebarService.state.get();\n          SidebarService.state.set(current === 'main' ? 'settings' : 'main');\n        }\n      }]\n    }\n  );\n})();\n\n",";(() => {\n  'use strict';\n\n  angular\n    .module('orodarius')\n    .component('videoItem', {\n      bindings: {\n        item: '=videoItem',\n        currentSubreddit: '=currentSubreddit',\n        index: '='\n      },\n      templateUrl: 'views/video-item.html',\n      controller: ['PlayerService', function(PlayerService) {\n        /* properties */\n        this.playerService = PlayerService;\n\n        /* methods */\n        this.getIsIdCurrent = getIsIdCurrent;\n\n        function getIsIdCurrent(id = '') {\n          return id === PlayerService.currentVideoItem.ownId;\n        }\n      }]\n    });\n})();\n\n"]}